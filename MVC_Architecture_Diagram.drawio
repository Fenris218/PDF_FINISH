<mxfile host="app.diagrams.net" modified="2024-11-24T11:35:00.000Z" agent="Custom" version="1.0">
  <diagram name="MVC Architecture" id="mvc-architecture">
    <mxGraphModel dx="1434" dy="790" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Thiết kế Mô hình MVC - Hệ thống Chuyển đổi PDF sang DOCX" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="200" y="10" width="800" height="30" as="geometry" />
        </mxCell>
        
        <!-- VIEW Layer -->
        <mxCell id="view-container" value="View (JSP)" style="swimlane;fontSize=14;fontStyle=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="60" width="340" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="jsp-index" value="index.jsp&#xa;(Upload Form)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;" vertex="1" parent="view-container">
          <mxGeometry x="20" y="40" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="jsp-viewlist" value="viewListConvert.jsp&#xa;(Danh sách)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;" vertex="1" parent="view-container">
          <mxGeometry x="180" y="40" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="jsp-login" value="login-modal.jsp&#xa;(Đăng nhập)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;" vertex="1" parent="view-container">
          <mxGeometry x="20" y="110" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="jsp-signup" value="signup-modal.jsp&#xa;(Đăng ký)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;" vertex="1" parent="view-container">
          <mxGeometry x="180" y="110" width="140" height="50" as="geometry" />
        </mxCell>
        
        <!-- CONTROLLER Layer -->
        <mxCell id="controller-container" value="Controller (Servlet)" style="swimlane;fontSize=14;fontStyle=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="280" width="340" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="servlet-converter" value="ConverterServlet&#xa;(Upload &amp; Queue)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;" vertex="1" parent="controller-container">
          <mxGeometry x="20" y="40" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="servlet-list" value="ListConvertServlet&#xa;(Hiển thị DS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;" vertex="1" parent="controller-container">
          <mxGeometry x="180" y="40" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="servlet-login" value="LoginServlet&#xa;(Xác thực)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;" vertex="1" parent="controller-container">
          <mxGeometry x="20" y="110" width="140" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="servlet-download" value="DownloadFileServlet&#xa;(Tải file)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;" vertex="1" parent="controller-container">
          <mxGeometry x="180" y="110" width="140" height="50" as="geometry" />
        </mxCell>
        
        <!-- MODEL - BEAN Layer -->
        <mxCell id="bean-container" value="BEAN (Data Objects)" style="swimlane;fontSize=12;fontStyle=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="450" y="60" width="280" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="bean-user" value="User.java&#xa;(username, password, email)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;" vertex="1" parent="bean-container">
          <mxGeometry x="20" y="40" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="bean-upload" value="Upload.java&#xa;(id, filename, status, date)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;" vertex="1" parent="bean-container">
          <mxGeometry x="20" y="85" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="bean-task" value="ConversionTask.java&#xa;(taskId, paths, status)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;" vertex="1" parent="bean-container">
          <mxGeometry x="20" y="130" width="240" height="35" as="geometry" />
        </mxCell>
        
        <!-- MODEL - BO Layer -->
        <mxCell id="bo-container" value="BO (Business Logic)" style="swimlane;fontSize=12;fontStyle=1;fillColor=#FFF9C4;strokeColor=#F9A825;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="450" y="260" width="280" height="250" as="geometry" />
        </mxCell>
        
        <mxCell id="bo-login" value="LoginBO&#xa;(Logic đăng nhập)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;" vertex="1" parent="bo-container">
          <mxGeometry x="20" y="40" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="bo-converter" value="ConverterBO&#xa;(Logic chuyển đổi)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;" vertex="1" parent="bo-container">
          <mxGeometry x="20" y="85" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="bo-queue" value="ConversionQueue&#xa;(Singleton queue)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;fontStyle=1" vertex="1" parent="bo-container">
          <mxGeometry x="20" y="130" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="bo-worker" value="ConversionWorker&#xa;(Background thread)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;" vertex="1" parent="bo-container">
          <mxGeometry x="20" y="175" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="bo-helper" value="PdfConvertionHelper&#xa;(PDF conversion)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;" vertex="1" parent="bo-container">
          <mxGeometry x="130" y="175" width="130" height="60" as="geometry" />
        </mxCell>
        
        <!-- MODEL - DAO Layer -->
        <mxCell id="dao-container" value="DAO (Data Access)" style="swimlane;fontSize=12;fontStyle=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="450" y="530" width="280" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="dao-login" value="LoginDAO&#xa;(User queries)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="dao-container">
          <mxGeometry x="20" y="40" width="240" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="dao-converter" value="ConverterDAO&#xa;(Upload queries)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="dao-container">
          <mxGeometry x="20" y="85" width="240" height="35" as="geometry" />
        </mxCell>
        
        <!-- DATABASE Layer -->
        <mxCell id="db-container" value="Database (MySQL)" style="swimlane;fontSize=14;fontStyle=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="450" y="680" width="280" height="150" as="geometry" />
        </mxCell>
        
        <mxCell id="db-users" value="users table&#xa;(username, password, email)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;" vertex="1" parent="db-container">
          <mxGeometry x="20" y="40" width="240" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="db-uploads" value="uploads table&#xa;(id, status, files, date)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;" vertex="1" parent="db-container">
          <mxGeometry x="20" y="90" width="240" height="40" as="geometry" />
        </mxCell>
        
        <!-- Background note -->
        <mxCell id="background-note" value="Background" style="text;html=1;strokeColor=#666;fillColor=#F5F5F5;align=center;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="780" y="60" width="390" height="770" as="geometry" />
        </mxCell>
        
        <!-- Luồng xử lý note -->
        <mxCell id="flow-note" value="LUỒNG XỬ LÝ CHÍNH&#xa;&#xa;1. User upload file (View → Controller)&#xa;2. Controller lưu file và tạo task&#xa;3. BO lưu vào Database qua DAO&#xa;4. Task thêm vào ConversionQueue&#xa;5. Worker xử lý task nền&#xa;6. Cập nhật status trong DB&#xa;7. User xem kết quả qua View" style="text;html=1;strokeColor=#333;fillColor=#FFFFCC;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;spacingLeft=10;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="800" y="100" width="350" height="150" as="geometry" />
        </mxCell>
        
        <!-- Pattern note -->
        <mxCell id="pattern-note" value="DESIGN PATTERNS&#xa;&#xa;✓ MVC Pattern: View - Controller - Model&#xa;✓ Singleton: ConversionQueue&#xa;✓ DAO Pattern: Data access layer&#xa;✓ Producer-Consumer: Queue + Worker&#xa;✓ Thread Pool: Background processing" style="text;html=1;strokeColor=#333;fillColor=#E8F5E9;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;spacingLeft=10;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="800" y="270" width="350" height="140" as="geometry" />
        </mxCell>
        
        <!-- Status flow note -->
        <mxCell id="status-note" value="TRẠNG THÁI XỬ LÝ&#xa;&#xa;queued → processing → completed&#xa;                    ↓&#xa;                  failed" style="text;html=1;strokeColor=#333;fillColor=#FFF3E0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;spacingLeft=10;spacingTop=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="800" y="430" width="350" height="100" as="geometry" />
        </mxCell>
        
        <!-- Tech stack note -->
        <mxCell id="tech-note" value="CÔNG NGHỆ SỬ DỤNG&#xa;&#xa;• Java Servlet &amp; JSP&#xa;• MySQL Database&#xa;• Spire.PDF &amp; Spire.Doc&#xa;• Apache Tomcat 10&#xa;• Maven Build Tool" style="text;html=1;strokeColor=#333;fillColor=#E3F2FD;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;spacingLeft=10;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="800" y="550" width="350" height="130" as="geometry" />
        </mxCell>
        
        <!-- Arrows from View to Controller -->
        <mxCell id="arrow-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="jsp-index" target="servlet-converter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="jsp-viewlist" target="servlet-list">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="jsp-login" target="servlet-login">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Arrows from Controller to BO -->
        <mxCell id="arrow-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="servlet-converter" target="bo-converter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="servlet-list" target="bo-converter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="servlet-login" target="bo-login">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Arrows from BO to DAO -->
        <mxCell id="arrow-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="bo-login" target="dao-login">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="bo-converter" target="dao-converter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Arrows from DAO to Database -->
        <mxCell id="arrow-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="dao-login" target="db-users">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="dao-converter" target="db-uploads">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- BO internal connections -->
        <mxCell id="arrow-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#F9A825;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="bo-queue" target="bo-worker">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#F9A825;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="bo-worker" target="bo-helper">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
